(()=>{const n=10,r=0,u=0xffffffffffff,o=BigInt("302240678275694148452352"),a=BigInt("377789318629571617095679"),i=/^[0123456789ABCDEFGHJKMNPQRSTVWXYZ]{26}$/i,e=/^\{?[0-9A-F]{8}-?[0-9A-F]{4}-?[0-9A-F]{4}-?[0-9A-F]{4}-?[0-9A-F]{12}\}?$/i,s="Invalid format",d=`Timestamp (##VALUE##) must be between ${r} and `+u,f=`Data value (##VALUE##) must be between ${o} and `+a;function p(t){return"string"==typeof t&&i.test(t)}function g(t){t=p(t)?"ulid":"string"==typeof(t=t)&&e.test(t)?"uuid":null;if(null===t)throw new Error(s);return t}function w(t,n){var r="-"===t.charAt(0),t=t.slice(r?1:0).split("").reduce((t,r)=>t*BigInt(n)+BigInt(parseInt(r,n)),BigInt(0));return r?-t:t}function l(t){return t.toUpperCase().split("").map(t=>{var r=t.charCodeAt(0);let n=0;return 73<=r?(n++,75<=r&&n++,77<=r&&n++,82<=r&&n++,String.fromCharCode(r+n)):t}).join("")}function c(t){return t.toUpperCase().split("").map(t=>{var r=t.charCodeAt(0);let n=0;return 74<=r?(n++,77<=r&&n++,80<=r&&n++,86<=r&&n++,String.fromCharCode(r-n)):t}).join("").toLowerCase()}function A(t){return t.replace(/[-\{\}]/g,"")}function S(t){var r=[...crypto.getRandomValues(new Uint16Array(5))].map((t,r)=>{switch(r){case 0:return Math.floor(t/65535*4096)+16384;case 1:return Math.floor(t/65535*32767)+32768;default:return t}}).map(t=>t.toString(16).padStart(4,"0")).join("");return"uuid"===t?r:C(r,"uuid","ulid")}function C(t,r,n){return"uuid"===r?(t=(t=A(t)).substring(t.length-20).toLowerCase(),"uuid"===n?t:l(w(t,16).toString(32))):(t=t.substring(t.length-16).toUpperCase(),"ulid"===n?t:w(c(t),32).toString(16))}function I(t,r="ulid"){return"uuid"===r?t.toString(16).toUpperCase():l(t.toString(32))}function U(t,r="ulid"){return"uuid"===r?parseInt(A(t).substring(0,12).toLowerCase(),16):parseInt(c(t.substring(0,n).toUpperCase()),32)}function m(t,r){if("string"!=typeof t||"string"!=typeof r)throw new Error(s);var n=g(t);return n===r?t:("uuid"===r?M:E)(I(U(t,n),r),C(t,n,r))}function T(t){if(t<r||t>u)throw new Error(d.replace("##VALUE##",t.toString()))}function E(t,r){return""+t.padStart(n,"0")+r.padStart(16,"0")}function M(t,r){t=(""+t.padStart(12,"0")+r.padStart(20,"0")).toUpperCase().padStart(32,"0");return`${t.substring(0,8)}-${t.substring(8,12)}-${t.substring(12,16)}-${t.substring(16,20)}-`+t.substring(20)}function t(t){return T(t=t??Date.now()),E(I(t),S("ulid"))}t.uuid=t=>(T(t=t??Date.now()),M(I(t,"uuid"),S("uuid"))),t.is=t=>p(t),t.timestamp=t=>{return U(t,g(t))},t.data=t=>{return"uuid"===g(t)?w(A(t).substring(12).toLowerCase(),16):w(c(t.substring(n).toUpperCase()),32)},t.toUUID=t=>m(t,"uuid"),t.fromUUID=t=>m(t,"ulid"),t.factory=(()=>{let n=Date.now(),u=o;function i(){let t=u.toString(16);return/^[89a-f]$/.test(t.charAt(4))||(u+=BigInt("9223372036854775808"),t=u.toString(16)),t}function e(){u<a?u++:(u=o,T(++n))}return({timestamp:t,data:r}={})=>{if(T(n=t??Date.now()),(u=r??w(S("uuid"),16))<o||u>a)throw new Error(f.replace("##VALUE##",u.toString()));return u--,{ulid:()=>{e();var t=i();return E(I(n,"ulid"),C(t,"uuid","ulid"))},uuid:()=>{e();var t=i();return M(I(n,"uuid"),C(t,"uuid","uuid"))}}}})(),window.ULID_CHARS="0123456789ABCDEFGHJKMNPQRSTVWXYZ",window.ULID_TIMESTAMP_LENGTH=n,window.UUID_TIMESTAMP_LENGTH=12,window.TIMESTAMP_MIN=r,window.TIMESTAMP_MAX=u,window.FACTORY_DATA_MIN=o,window.FACTORY_DATA_MAX=a,window.ulid=t})();
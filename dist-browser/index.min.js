(()=>{const e="0123456789ABCDEFGHJKMNPQRSTVWXYZ",r=10,n=0,u=0xffffffffffff,o=BigInt("302240678275694148452352"),a=BigInt("377789318629571617095679"),i=/^[0123456789ABCDEFGHJKMNPQRSTVWXYZ]{26}$/i,d=/^\{?[0-9A-F]{8}-?[0-9A-F]{4}-?[0-9A-F]{4}-?[0-9A-F]{4}-?[0-9A-F]{12}\}?$/i,s="Invalid format",f=`Timestamp (##VALUE##) must be between ${n} and `+u,g=`Data value (##VALUE##) must be between ${o} and `+a;function l(t){return"string"==typeof t&&i.test(t)}function w(t){t=l(t)?"ulid":"string"==typeof(t=t)&&d.test(t)?"uuid":null;if(null===t)throw new Error(s);return t}function p(t,r){var n="-"===t.charAt(0),t=t.slice(n?1:0).split("").reduce((t,n)=>t*BigInt(r)+BigInt(parseInt(n,r)),BigInt(0));return n?-t:t}function c(t){for(var n=[],r=typeof t,u="number"==r?e.length:BigInt(e.length);0<t;)n.unshift(e[t%u]),t="number"==r?Math.floor(t/u):t/u;return n.join("")}function A(t){var n=t.toUpperCase();let r=BigInt(0);var u=n.length,i=BigInt(e.length);for(let t=0;t<u;t++)r=r*i+BigInt(e.indexOf(n[t]));return r}function I(t){return t.replace(/[-\{\}]/g,"")}function S(t){var n=[...crypto.getRandomValues(new Uint16Array(5))].map((t,n)=>{switch(n){case 0:return Math.floor(t/65535*4096)+16384;case 1:return Math.floor(t/65535*32767)+32768;default:return t}}).map(t=>t.toString(16).padStart(4,"0")).join("");return"uuid"===t?n:b(n,"uuid","ulid")}function b(t,n,r){return"uuid"===n?(t=(t=I(t)).substring(t.length-20).toLowerCase(),"uuid"===r?t:c(p(t,16))):(t=t.substring(t.length-16).toUpperCase(),"ulid"===r?t:A(t).toString(16))}function U(t,n="ulid"){return"uuid"===n?t.toString(16).toUpperCase():c(t)}function h(t,n="ulid"){return"uuid"===n?parseInt(I(t).substring(0,12).toLowerCase(),16):Number(A(t.substring(0,r)))}function M(t,n){if("string"!=typeof t||"string"!=typeof n)throw new Error(s);var r=w(t);return r===n?t:("uuid"===n?E:m)(U(h(t,r),n),b(t,r,n))}function T(t){if(t<n||t>u)throw new Error(f.replace("##VALUE##",t.toString()))}function m(t,n){return""+t.padStart(r,"0")+n.padStart(16,"0")}function E(t,n){t=(""+t.padStart(12,"0")+n.padStart(20,"0")).toUpperCase().padStart(32,"0");return`${t.substring(0,8)}-${t.substring(8,12)}-${t.substring(12,16)}-${t.substring(16,20)}-`+t.substring(20)}function t(t){return T(t=t??Date.now()),m(U(t),S("ulid"))}t.uuid=t=>(T(t=t??Date.now()),E(U(t,"uuid"),S("uuid"))),t.is=t=>l(t),t.timestamp=t=>{return h(t,w(t))},t.data=t=>{return"uuid"===w(t)?p(I(t).substring(12).toLowerCase(),16):A(t.substring(r).toUpperCase())},t.toUUID=t=>M(t,"uuid"),t.fromUUID=t=>M(t,"ulid"),t.factory=(()=>{let r=Date.now(),u=o;function i(){let t=u.toString(16);return/^[89a-f]$/.test(t.charAt(4))||(u+=BigInt("9223372036854775808"),t=u.toString(16)),t}function e(){u<a?u++:(u=o,T(++r))}return({timestamp:t,data:n}={})=>{if(T(r=t??Date.now()),(u=n??p(S("uuid"),16))<o||u>a)throw new Error(g.replace("##VALUE##",u.toString()));return u--,{ulid:()=>{e();var t=i();return m(U(r,"ulid"),b(t,"uuid","ulid"))},uuid:()=>{e();var t=i();return E(U(r,"uuid"),b(t,"uuid","uuid"))}}}})(),window.ULID_CHARS=e,window.ULID_TIMESTAMP_LENGTH=r,window.UUID_TIMESTAMP_LENGTH=12,window.TIMESTAMP_MIN=n,window.TIMESTAMP_MAX=u,window.FACTORY_DATA_MIN=o,window.FACTORY_DATA_MAX=a,window.ulid=t})();